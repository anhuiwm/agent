<extend name="Public@Public/base" />
<block name="main_content">
    <div class="form-group">
        <form method="post" class="myforms" action="{:U('GmTool/Command/itemlog')}">
            </br> 请输入:</br>
            <input type="text" class="form-control" value="{$curuser}" placeholder="UserID" name="userid">
            <!--<input type="text" class="form-control"  placeholder="typeid" name="typeid">-->
            <select class="form-control" name="typeid">
                <option value="11">[物品    ][NORMAL   ]</option>
                <option value="10">[黄金弹头][BULLET   ]</option>
                <option value="1 ">[点券    ][Cashpoint]</option>
                <option value="2 ">[奖牌    ][Medal    ]</option>
                <option value="3 ">[奖励    ][Reward   ]</option>
                <option value="4 ">[牛牛    ][NiuNiu   ]</option>
                <option value="5 ">[赠送物品][GlobelBag]</option>
                <option value="6 ">[抽奖    ][Lottery  ]</option>
                <option value="7 ">[技能    ][Skill    ]</option>
                <option value="8 ">[森林舞会][Dial     ]</option>
                <option value="9 ">[        ][Car      ]</option>
            </select>
            <input type="text" class="form-control"  placeholder="(type为物品时为itemid)" name="typesum">
            <input type="text" class="form-control" name="starttime"  onfocus="selectdate(1)" placeholder="开始日期" class="input" readonly>
            <input type="text" class="form-control" name="endtime"  onfocus="selectdate(2)" placeholder="结束日期" class="input" readonly>
            <button class="btn btn-info btn-sm ">查询</button>
        </form>
    </div>

    个人物品记录:
 <table class="table  datalist  table-hover">
  <thead>
    <tr>
      <foreach name="title_lists" item="row">
        <th>
          {$row}
        </th>
      </foreach>
      <th class="tright pad-r21" scope="row">
          <div class="btn-group">
          </div>
      </th>
    </tr>
  </thead>
  <tbody>
    <foreach name="list_data" item="row" key='key'>
    <tr>
      <foreach name="title_lists" item="row1" key='key1'>
        <td>
         {$row[$row1]}
        </td>
      </foreach>
    </tr>
    </foreach>
  </tbody>
    <thead>
        <tr>
            <foreach name="title_lists" item="row">
                <th>
                    {$row}
                </th>
            </foreach>
            <th class="tright pad-r21" scope="row">
                <div class="btn-group">
                </div>
            </th>
        </tr>
    </thead>
  </table>








        <!--<script>
            console.log('Connection to server opened');
            var ws = new WebSocket("ws://101.132.45.17:8181");
    ws.onopen = function (e) {
        console.log('Connection to server opened');
    }
    function sendMessage() {
        console.log('Connection to server opened');
        ws.send($('#message').val());
    }
        </script>

        <div class="vertical-center">
            <div class="container">
                <p>&nbsp;</p>
                <form role="form" id="chat_form" onsubmit="sendMessage(); return false;">
                    <div class="form-group">
                        <input class="form-control" type="text" name="message" id="message"
                               placeholder="Type text to echo in here" value="" />
                    </div>
                    <button type="button" id="send" class="btn btn-primary"
                            onclick="sendMessage();">
                        Send!
                    </button>
                </form>
            </div>
        </div>-->









        <script type="text/javascript">
        var ws;
        function ToggleConnectionClicked() {
            try {
                var ws = new WebSocket("ws://10.0.0.168:40056");
                ws.onopen = function () {
                    // alert("握手成功");
                    ws.send("123456");
                };
                ws.onmessage = function (e) {
                    //alert("message:" + e.data);
                };
                ws.onerror = function () {
                    alert("error");
                };
               // ws.send("123456");
                    //ws = new WebSocket("ws://127.0.0.1:2222");//连接服务器
                    //ws.onopen = function(event){alert("已经与服务器建立了连接\r\n当前连接状态："+this.readyState);};
                    //ws.onmessage = function(event){alert("接收到服务器发送的数据：\r\n"+event.data);};
                    //ws.onclose = function(event){alert("已经与服务器断开连接\r\n当前连接状态："+this.readyState);};
                    //ws.onerror = function(event){alert("WebSocket异常！");};
                } catch (ex) {
                    alert(ex.message);
                }
        };

        function SendData() {
            try{
                var content = document.getElementById("content").value;
                if(content){
                    ws.send(content);
                }

            }catch(ex){
                alert(ex.message);
            }
        };

        function seestate(){
            alert(ws.readyState);
        }

        </script>

 
        <button id='ToggleConnection' type="button" onclick='ToggleConnectionClicked();'>连接服务器</button><br /><br />
        <textarea id="content"></textarea>
        <button id='ToggleConnection' type="button" onclick='SendData();'>发送我的名字：beston</button><br /><br />
        <button id='ToggleConnection' type="button" onclick='seestate();'>查看状态</button><br /><br />


</block>